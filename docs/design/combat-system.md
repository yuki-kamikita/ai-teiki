## 戦闘仕様まとめ（開発者・AI向け）

### 戦闘の流れ
- 1回の更新で1回戦闘
- ターン制（仮実装は最大5ターン、HP0で終了）
- 行動順は速度の高い側が先

### 勝敗
- 相手HPが0になった時点で行動を止める
- HP比較で勝敗判定（仮実装）

### HP/MP
- HPが0で戦闘離脱
- MPはスキル使用時に消費
- 毎ターンMPが最大値の10%回復

### 物理ダメージ
- 物理ダメージ = 基礎ダメージ × 乱数 × (1 - 防御率)
- 基礎ダメージ = 筋力 × 技の強さ
- 乱数は 0.75〜1.00
- 防御率は「筋力 / (筋力 + 200)」を基準に、最小5%、最大65%

### 魔法ダメージ
- 魔法ダメージ = 技の強さ × 乱数
- 乱数は 0.75〜1.00
- 防御側のステータスで減少しない
- 技ごとのMP消費で強弱を表現

### クリティカル
- クリ率は「知識 / 500」を基準、最小5%、最大50%
- クリティカル時は防御率を0として計算

### 命中・回避（単体攻撃のみ）
- 命中率 = 基本命中 + (攻撃側速度 - 防御側速度) / 1000
- 最小70%、最大98%

### 状態異常
- 毒: ターン開始時にHPの5%ダメージ
- 眠り: 行動不能
- 麻痺: 一定確率で行動不能
- 状態異常の付与は「技の付与率」と「精神の耐性」で判定
  - 耐性は精神 / 400（最小0%、最大50%）

### 戦闘ログ
- ターン開始時のHP/MP/状態異常を表示
- 行動順に縦並びで表示
- 戦闘終了後に勝敗と報酬を表示
